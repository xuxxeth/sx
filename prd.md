# 仿 X（Twitter）链上+链下社交产品 需求文档（PRD）

版本：v1.0  
日期：2026-02-07  
作者：——  

---

## 1. 背景与目标

### 1.1 背景
- 目标是在 Solana 生态构建一款类似 X（Twitter）的公开社交产品。
- 采用链上+链下架构，兼顾可验证性、可持续成本与用户体验。

### 1.2 目标
- 复刻 X 的核心体验（发帖、关注、互动、信息流、话题）。
- 使用链上记录关键关系与价值流转，链下保障性能与内容分发。
- 具备可扩展性与可治理性。

### 1.3 不做的事（MVP 阶段）
- 不做复杂的短视频上传分发。
- 不做全面的广告系统。
- 不做多语言自动翻译。
- 不做企业级商业 API 与第三方商业生态。

---

## 2. 用户与使用场景

### 2.1 用户类型
- 普通用户：阅读、发帖、互动、关注。
- 创作者/意见领袖：高频发帖、粉丝互动、打赏收益。
- 运营/治理用户：内容管理、黑名单、话题维护。
- 开发者：调用开放接口，构建工具或生态。

### 2.2 核心场景
- 快速发帖与信息传播。
- 关注/被关注的社交关系沉淀。
- 话题/标签的内容聚合。
- 对内容打赏或付费支持。

---

## 3. 产品范围与架构原则

### 3.1 架构原则
- 链上：身份、社交关系、内容索引、价值结算、治理记录。
- 链下：内容存储、推荐/排序、搜索与分发。

### 3.2 数据分层
- 链上数据：用户身份、关注关系、发帖索引、互动索引、内容哈希、打赏/付费记录。
- 链下数据：正文内容、媒体文件、评论树、推荐结果、搜索索引。

---

## 4. 功能需求（仿 X）

### 4.1 账号与身份
**功能**
- 钱包登录（Solana）
- 账号资料：头像、昵称、简介、位置、链接
- 身份可验证（可选）：链上标记（NFT/验证徽章）

**需求**
- 同一钱包可绑定一个主账号
- 允许设置用户名（不可重复）
- 个人主页展示统计：关注、粉丝、帖子、赞、收藏

---

### 4.2 发帖（Tweet）
**功能**
- 文本发帖（限制字数）
- 图片/链接/表情
- 帖子可选链上登记（内容哈希、索引）

**需求**
- 发帖默认链下存储，链上记录哈希与索引
- 支持“置顶”
- 支持“仅关注者可见”（链下权限控制）

**字段**
- post_id
- author
- content_hash
- created_at
- visibility

---

### 4.3 评论（Reply）
**功能**
- 评论、二级评论
- 按时间或热度排序

**需求**
- 评论默认链下
- 链上记录评论索引（可选）

---

### 4.4 转发（Repost）
**功能**
- 直接转发
- 引用转发（带评论）

**需求**
- 链上记录转发索引（可选）

---

### 4.5 点赞与收藏
**功能**
- 点赞
- 收藏（书签）

**需求**
- 点赞链下记录，链上可选索引
- 收藏仅链下

---

### 4.6 关注/粉丝
**功能**
- 关注/取消关注
- 粉丝列表、关注列表

**需求**
- 关注关系链上存证
- 防刷限制（速率限制或质押门槛）

---

### 4.7 信息流（Timeline）
**功能**
- Following 时间线（关注的账号）
- 推荐时间线（热门/算法）

**需求**
- 链下生成与排序
- 支持过滤：关键词、屏蔽用户

---

### 4.8 搜索与话题
**功能**
- 关键词搜索
- 话题/标签聚合

**需求**
- 链下搜索索引
- 热门话题榜（链下统计）

---

### 4.9 私信（DM）[可选]
**功能**
- 一对一私信

**需求**
- 端对端加密（链下）
- 不上链

---

### 4.10 打赏与付费支持
**功能**
- 赞赏、订阅
- 付费内容（可选）

**需求**
- 链上结算
- 作者收入分账可配置

---

### 4.11 治理与风控
**功能**
- 黑名单/屏蔽
- 举报/申诉
- 违规内容处理

**需求**
- 链下治理为主
- 链上记录治理事件摘要（可选）

---

## 5. 链上模块（Solana）

### 5.1 智能合约组件
- 用户身份注册
- 关注关系登记
- 发帖/转发/评论索引记录（可选）
- 打赏与订阅
- 治理事件摘要

### 5.2 链上数据结构（示例）
- UserProfile
- FollowEdge
- PostIndex
- TipRecord
- GovernanceRecord

---

## 6. 链下模块

### 6.1 存储
- 内容存储：对象存储或去中心化存储（IPFS/Arweave）
- CDN 加速内容分发

### 6.2 服务
- 时间线生成服务
- 推荐算法
- 搜索服务
- 内容审核服务

---

## 7. 关键指标（KPIs）
- DAU / MAU
- 每日发帖数
- 平均互动率
- 交易额（打赏/订阅）
- 留存率

---

## 8. 权限与安全
- 用户数据访问权限控制
- 防刷与反垃圾策略
- 速率限制
- 防机器人机制（质押/费用/验证）

---

## 9. 体验要求
- 发帖 1-2 秒内完成展示
- 信息流加载 < 1s
- 钱包签名频率尽可能低

---

## 10. MVP 范围建议
- 钱包登录
- 发帖、评论、转发、点赞
- 关注关系链上
- 信息流（关注）
- 打赏功能
- 基础治理（举报、屏蔽）

---

## 11. 后续版本规划
- 高级推荐算法
- 话题榜
- 订阅与付费内容
- 社区治理 DAO
- 创作者工具

---

## 12. 风险与对策
- 规模化成本：链下扩展 + 内容索引优化
- 合规风险：内容审核 + 可封禁机制
- UX 断层：减少钱包签名、优化缓存与加载

---

## 13. 里程碑
- M0 需求冻结
- M1 MVP 开发
- M2 小规模内测
- M3 公测 + 生态接入

